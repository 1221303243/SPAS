# SPAS Admin Dashboard - Cursor Rules

## Project Overview
SPAS (Student Performance Assessment System) is a PHP-based web application with an admin dashboard for managing users, subjects, classes, and academic configuration.

## Project Structure
```
SPAS/
├── pages/
│   └── admin/
│       ├── dashboard.php          # Main admin dashboard
│       ├── users.php              # User management
│       ├── subjects.php           # Subject management
│       ├── classes.php            # Class management
│       ├── academic_config.php    # Academic configuration management
│       └── sidebar_admin.php      # Admin sidebar navigation
├── css/
│   ├── admin_dashboard.css        # Dashboard styling
│   ├── admin_users.css            # User management styling
│   ├── admin_subjects.css         # Subject management styling
│   ├── admin_classes.css          # Class management styling
│   ├── admin_academic_config.css  # Academic configuration styling
│   └── admin.css                  # Legacy admin styling
├── config/
│   └── academic_config.php        # Academic configuration constants
├── database/
└── auth/
```

## Coding Guidelines

### PHP Files
- Use PHP 7.4+ syntax
- Include proper HTML structure with DOCTYPE
- Use Material Icons for UI elements
- Include sidebar_admin.php in all admin pages
- Use consistent naming: lowercase with underscores
- Add proper comments for sample data sections
- Implement proper form validation and error handling

### CSS Guidelines
- Use modern CSS with flexbox and grid
- Follow BEM-like naming conventions
- Use CSS custom properties for colors
- Implement responsive design with mobile-first approach
- Use consistent spacing: 8px base unit
- Include hover states and transitions
- Add focus states for accessibility

### Color Scheme
- Primary: #00C1FE (blue)
- Secondary: #1F1235 (dark blue)
- Success: #28a745 (green)
- Warning: #ffc107 (yellow)
- Danger: #dc3545 (red)
- Neutral: #6c757d (gray)
- Background: #f8f9fa (light gray)

### Component Patterns
- Cards with hover effects and shadows
- Modal dialogs for add/edit forms
- Search and filter functionality
- Status badges with color coding
- Action buttons with icons
- Responsive grid layouts
- Configuration forms with validation

### File Organization
- Separate CSS files for each admin page
- Consistent file naming: admin_[page].css
- Modular component structure
- Reusable utility classes

### Responsive Design
- Mobile-first approach
- Breakpoints: 768px, 480px
- Flexible grid systems
- Touch-friendly interactions

### Accessibility
- Proper focus states
- Semantic HTML structure
- ARIA labels where needed
- Keyboard navigation support
- Screen reader compatibility

### Performance
- Optimized CSS selectors
- Minimal JavaScript
- Efficient DOM manipulation
- Lazy loading for modals

## Admin Dashboard Features
- User management (add, edit, delete)
- Subject management (add, edit, delete)
- Class management (add, edit, delete)
- Academic configuration management
  - Semester start date setting
  - Semester duration configuration
  - Passing percentage configuration
  - Assessment types display
- Search and filter functionality
- Status indicators
- Modal forms for data entry
- Responsive design
- System status monitoring

## Academic Configuration System
- Dynamic configuration file management
- Form validation for all inputs
- Real-time configuration updates
- Current configuration display
- Semester end date calculation
- Assessment types overview
- Admin-only access control

## Database Integration
- Sample data arrays for demonstration
- Prepared for MySQL integration
- Consistent data structure
- Foreign key relationships

## Security Considerations
- Input validation and sanitization
- SQL injection prevention
- XSS protection
- CSRF tokens (to be implemented)
- Role-based access control
- File write permissions for configuration

## Future Enhancements
- Real database integration
- User authentication
- File upload functionality
- Advanced filtering
- Export/import features
- Audit logging
- Email notifications
- Academic year management
- Multiple semester support

## Recent Updates
- Add Class modal in pages/admin/classes.php is now functional, posts to the server, and the status field has been removed. Subject and lecturer dropdowns are now dynamic.
- Academic configuration system implemented with semester start date management, duration settings, and passing percentage configuration.
- New admin page: academic_config.php with modern UI and form validation.
- Updated sidebar navigation to include Academic Config link.
- Fixed lecturer login flow: lecturers now redirect to select_edu_level.php first, then to lecturer_dashboard.php after selecting education level.
- Added education level validation to lecturer pages (lecturer_dashboard.php, student_list.php, assessment.php, plan.php) to ensure proper flow.
- Education level selection system implemented with Foundation, Diploma, Undergraduate, and Postgraduate options.
- Presentation mode implemented for multi-account demonstration: new presentation_login.php with quick login cards for different user roles.
- Added presentation guide (presentation_guide.php) with instructions for demonstrating multiple user roles simultaneously.
- Demo mode accessible from main landing page and regular login page for easy presentation access.
- Multi-session manager (session_manager.php) implemented for switching between multiple user accounts in the same browser window.
- Session persistence system allows maintaining multiple user sessions and switching between them instantly.
- Student-only registration: The signup form is now restricted to students only, with role automatically set to "student" and education level selection always visible. Email validation requires .edu.my domain for all registrations.
- Functional system status monitoring: Implemented real-time database connectivity checks, server health metrics (disk usage, memory usage, PHP version), and security monitoring with failed login attempt tracking.
- Login attempt tracking: Added login_attempts table and logging system to monitor successful and failed login attempts for security analysis.
- Interactive status details: Admin dashboard now shows clickable system status cards with detailed metrics in modal dialogs.
- Functional search functionality: Class management page now has a working search bar that allows admins to search by Class ID or Class Name with server-side filtering and clear functionality.
- Fixed grade submission system: Corrected MySQL bind parameter types in grade_submit.php (changed 'iiiidss' to 'iiiidds') and added comprehensive error handling with detailed logging for all SQL operations to help debug grade submission issues. Removed references to non-existent coursework_count and final_exam_count columns that were causing SQL errors. Fixed bind parameter count mismatch in UPDATE statement (corrected to 'sdddiii').
- Fixed grade calculation and display: Replaced Pass/Fail (P/F) grading system with proper letter grades (A+, A, A-, B+, B, B-, C+, C, C-, D+, D, F) based on percentage scores. Updated current grade display in grade.php to show overall calculated grades instead of individual assessment grades. Added calculateOverallGrade() function to compute real-time overall subject grades based on all completed assessments.
- Implemented MMU grading system: Applied official Multimedia University grading scale consistently across all system pages (A+: 90-100%, A: 80-89.99%, B+: 76-79.99%, B: 72-75.99%, B-: 68-71.99%, C+: 65-67.99%, C: 60-64.99%, C-: 56-59.99%, D+: 50-55.99%, D: 40-49%, F: 0-39.99%). Updated grade calculation logic in grade_submit.php, grade.php, student_detail.php, course_content.php, and sample data SQL to match MMU standards. 